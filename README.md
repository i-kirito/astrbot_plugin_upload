# AstrBot 插件上传安装器

> 本项目是基于 AstrBot 开发的插件，支持通过 ZIP 文件上传、URL 或本地目录检索来安装/管理插件。

## ✨ 功能特性

- **插件安装**：支持上传 ZIP 文件或从本地目录 (`data/astrbot_plugin_upload/repo`) 选择安装。
- **交互式管理**：通过 `/插件列表` 可视化查看并一键安装。
- **数据分离**：插件库与配置存储在 `data` 目录，更新插件本身不丢失数据。

## ⚙️ 配置说明

请在 AstrBot 管理后台的插件配置中填写：

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `astrbot_url` | AstrBot API 地址 | `http://localhost:6185` |
| `api_username` | 登录用户名 | `astrbot` |
| `api_password` | **登录密码 (明文)** | 空 (必填) |
| `admin_only` | 仅限管理员使用 | `true` |

## 💻 指令列表

| 指令 | 说明 |
|------|------|
| `/插件列表` | 查看本地仓库可用插件，**支持直接回复序号安装** |
| `/上传插件` | 发送此命令并附带 ZIP 文件进行安装 |
| `/安装插件 <路径>` | 指定绝对路径安装插件 |
| `/卸载插件 <名称>` | 卸载指定插件 |
| `/插件帮助` | 显示帮助信息 |

## 📂 目录结构

插件安装后，会自动在 AstrBot 根目录下创建数据目录：

- **插件仓库**：`data/astrbot_plugin_upload/repo/`
  - 将您的插件文件夹放入此目录，即可在 `/插件列表` 中看到。
- **配置文件**：`data/astrbot_plugin_upload/credentials.json` (自动管理)

## 📝 版本历史

- **v1.2.1**:
  - 交互优化：`/插件列表` 后可直接回复序号安装。
  - 配置简化：移除指令配置，改用后台面板配置密码。
- **v1.1.1**: 实现数据持久化分离，迁移至 `data` 目录。
- **v1.0.0**: 初始版本，支持 ZIP 上传安装。
