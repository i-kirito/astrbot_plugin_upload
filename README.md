# AstrBot 插件上传安装器

> 本项目是基于 AstrBot 开发的插件，支持通过 ZIP 文件上传、URL 或本地目录检索来安装/管理插件。

## ✨ 功能特性

- **多源安装**：
  - **ZIP 上传**：发送 `/插件安装` 并附带 ZIP 文件。
  - **GitHub URL**：支持直接从 GitHub 仓库链接安装（自动下载主分支）。
  - **本地路径**：支持从服务器本地绝对路径安装。
- **一键更新**：通过 `/插件更新` 指令一键更新本地 Git 仓库类型的插件。
- **交互式管理**：通过 `/插件列表` 可视化查看本地库插件，支持回复序号直接安装。
- **数据分离**：插件库与配置存储在 `data` 目录，更新插件本身不丢失数据。
- **便捷配置**：直接在控制台配置 API 密码，支持明文自动 MD5。

## ⚙️ 配置说明

请在 AstrBot 管理后台的插件配置中填写：

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `astrbot_url` | AstrBot API 地址 | `http://localhost:6185` |
| `api_username` | 登录用户名 | `astrbot` |
| `api_password` | **登录密码 (明文)** | 空 (必填) |
| `admin_only` | 仅限管理员使用 | `true` |

## 💻 指令列表

| 指令 | 参数 | 说明 |
|------|------|------|
| **`/插件安装`** | `[URL/路径/ZIP]` | 智能安装指令。支持附带 ZIP、输入 GitHub 链接或本地路径。 |
| **`/插件市场`** | `[序号]` | **新增**：浏览并安装 i-kirito 的 AstrBot 插件市场。 |
| **`/插件列表`** | `[序号]` | 查看本地仓库插件。**支持交互安装**，也可直接加序号快捷安装。 |
| **`/插件更新`** | `<插件名>` | 更新指定插件（支持 Git Pull 自动拉取更新）。 |
| **`/卸载插件`** | `<名称>` | 卸载指定插件。 |
| **`/插件帮助`** | 无 | 显示帮助信息。 |

### 使用示例

1.  **安装 GitHub 插件**：
    `/插件安装 https://github.com/username/plugin-repo`
2.  **交互式安装**：
    输入 `/插件列表` -> 查看列表 -> 回复 `1` 安装第一个插件。
4.  **插件市场**：
    发送 `/插件市场` 查看 i-kirito 发布的官方插件列表，回复序号即可一键安装。

## 📂 目录结构

插件安装后，会自动在 AstrBot 根目录下创建数据目录：

- **插件仓库**：`data/astrbot_plugin_upload/repo/`
  - 将您的插件文件夹放入此目录，即可在 `/插件列表` 中看到。
- **配置文件**：`data/astrbot_plugin_upload/credentials.json` (自动管理)

## 📝 版本历史

- **v1.3.0**:
  - ✨ 新增 **插件市场** 功能：通过 `/插件市场` 指令直接浏览并安装 i-kirito 的 GitHub 插件。
- **v1.2.2**:
  - 重构指令系统：合并安装指令，支持 GitHub URL 安装。
  - 新增 `/插件更新` 指令，支持 Git 仓库自动更新。
- **v1.2.1**:
  - 交互优化：`/插件列表` 后可直接回复序号安装。
  - 配置简化：移除指令配置，改用后台面板配置密码。
- **v1.1.1**: 实现数据持久化分离，迁移至 `data` 目录。
- **v1.0.0**: 初始版本，支持 ZIP 上传安装。
